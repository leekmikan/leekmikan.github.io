<!DOCTYPE html>
<html lang="ja">
	<head>
	<meta charset="utf-8">
	<meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0' name='viewport'/>
	<meta name="description" content="Wavファイルにエフェクトを付けられるよ。現在C++から移植中...">
	<title>エフェクター</title>
	<link rel="stylesheet" href="des.css">
	<link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&display=swap" rel="stylesheet">
	<link rel="icon" type="image/jpg" href="../icon.jpg">
	<link rel="apple-touch-icon" sizes="180x180" href="../icon.jpg">
	</head>
		<body>
			<div class="ct">
				<h1>簡易エフェクター</h1>
			</div>
			<p>16bit 2chのwavファイルを選択</p>
			<input type="file" id="file"><br><br><br>
			<div class="ct">
				<p>ここに生成される</p>
				<audio id="pre" controls src=""></audio>
				<p><a id="dl" href="" download="null.wav">ダウンロードはここをクリック(X名前.wav)</a></p>
			</div>
			<p>※一応、一度に付けられるエフェクト(チェックボックスのチェック)は3つまでに制限</p>
			<input id="e0" type="checkbox">再生速度<br>
			速度：<input type="range" id="speed" min="0.5" max="4" value="1.0" step="0.01" onchange="document.getElementById('speed_v').innerHTML = this.value"><span id="speed_v">1.00</span>倍速<br>
			ピッチ：<input type="range" id="pitch" min="-12" max="24" value="0.0" step="0.1" onchange="document.getElementById('pitch_v').innerHTML = this.value"><span id="pitch_v">0.00</span><br>
			<button onclick="var x = 12 * Math.log2(Number(document.getElementById('speed').value));document.getElementById('pitch').value = x; document.getElementById('pitch_v').innerText = '' + x;">速度に合わせる</button>
			<button onclick="var x = Math.pow(2,Number(document.getElementById('pitch').value) / 12);document.getElementById('speed').value = x; document.getElementById('speed_v').innerText = '' + x;">音程に合わせる</button>
			<br><br><input id="e1" type="checkbox">拍子入れ替え<br>
			BPM：<input type="number" id="e1bpm" min="40" max="1600" value="120">
			　開始時間：<input type="number" id="e1del" min="0" max="100" value="0">
			<br><br><input id="e2" type="checkbox">微小遅延
			<br><br><input id="e3" type="checkbox">ボーカルキャンセラー(左右のチャンネルの差/2)
			<br><br><input id="e4" type="checkbox">2chのままモノラル化
			<br><br><input id="e5" type="checkbox">サンプリングレート変更(8000Hzで固定電話くらい)<br>
			サンプリングレート：<input type="number" id="e5sp" min="100" max="60000" value="10000">
			<br><br><input id="e6" type="checkbox">逆再生
			<br><br><input id="e7" type="checkbox">フランジャー<br>
			速度：<input type="range" id="e7speed" min="0.5" max="4" value="1.0" step="0.01" onchange="document.getElementById('e7speed_v').innerHTML = this.value"><span id="e7speed_v">1.00</span>倍速<br>
			割合：<input type="range" id="e7ps" min="0" max="0.5" value="0.5" step="0.01" onchange="document.getElementById('e7ps_v').innerHTML = this.value"><span id="e7ps_v">0.5</span><br>
			<div class="ct">
				<button onclick="Wexport();">生成</button>
				<br><input id="mn" type="checkbox">モノラル化(※audioタグのプレイヤーだとシークバーがバグる)
			</div>
			<p>高校2年生の頃に作って、ちょくちょくアップデートしているC++のコードのJavaScript移植版</p>
			<h2>今後移植予定(2024/8/16)</h2>
			<ol>
				<li>畳み込みリバーブ(フーリエ変換の関係で重くなるから後になるかも)</li>
				<li>オルゴール(フーリエ変換の関係で重くなるから後になるかも)</li>
				<li>区間で切り抜き</li>
				<li>コンプレッサー</li>
				<li>...</li>
			</ol>
			<p><a href="https://leekmikan.github.io/pg/index.html">元のコード(C++)はこちら</a></p>
			<p><a href="Music.js">JavaScriptコードはこちら</a></p>
		</body>
		<script src="Music.js"></script>
		<script src="main.js"></script>
	</head>
</html>